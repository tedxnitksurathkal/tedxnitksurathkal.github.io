<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- ========== Meta Tags ========== -->
    <meta charset="UTF-8" />
    <meta name="description" content="TEDx NITKSurathkal" />
    <meta
      name="keywords"
      content="TED, TEDx, TEDxNITKSurathkal, TEDx NITK, NITK, NITK Surathkal"
    />
    <meta name="author" content="TEDx NITK Surathkal" />
    <meta property="og:type" content="website" />
    <meta
      property="og:site_name"
      content="TEDxNITKSurathkal | Ideas Worth Spreading"
    />
    <meta
      property="og:title"
      content="TEDxNITKSurathkal | Ideas Worth Spreading"
    />
    <meta
      property="og:description"
      content="TEDxNITKSurathkal is coming back for Edition 2023! See you on 6th October 2023."
    />
    <meta property="og:url" content="http://www.tedxnitksurathkal.in/" />
    <meta
      property="og:image"
      content="http://www.tedxnitksurathkal.in/assets/img/favicon.png"
    />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />

    <!-- ========== Title ========== -->
    <title>Mosaic | TEDxNITKSurathkal</title>

    <!-- ========== Favicon Ico ========== -->
    <link rel="icon" href="assets/img/favicon.png" />

    <!-- ========== STYLESHEETS ========== -->
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <!--- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />

    <!-- 2022 Theme -->
    <link rel="stylesheet" href="./assets/theme/css/style.css" />
  </head>

  <body>
    <div class="modal" tabindex="-1" id="start-modal">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title fw-bold">INSTRUCTIONS</h2>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <p>
              1. Try to answer the questions in the shortest time
              possible
            </p>
            <p>
              2. The faster you answer, the higher the points you
              get
            </p>
            <p>3. You will lose 10 points for choosing the wrong answer</p>
            <p>4. ENJOY :D</p>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-primary"
              data-bs-dismiss="modal"
              id="start-btn"
            >
              Start
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="end-modal" class="modal" style="display: none">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title fw-bold">CONGRATULATIONS !!!</h2>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div id="results-end" class="modal-body">
            <p>Your score is: </p>
            <p class="fs-1 text-center"><b id="points-end"></b></p>
            <p>
              Take a screenshot of this page, put it as your story on Instagram,
              tag <b>@tedxnitksurathkal</b> and stand a chance to win exciting
              goodies!!
            </p>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-primary"
              data-bs-dismiss="modal"
              id="start-btn"
            >
              Proceed
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="container text-center" id="theme-reveal" style="display: none">
      <img
        src="assets/img/theme/themeMindMatters.jpg"
        style="padding: 50px 0"
      />
      <div class="pt-3">
        <p>
          <em
            >"Embrace the healing hues within. Mental health is the canvas of our resilience, and every stroke of self-care adds depth and beauty to the masterpiece of our lives."
</em
          >
        </p>

        <p>
          Welcome to "<em>Mind Matters</em>," a captivating exploration into the depths of the human psyche. In our TEDx event, we're devoted to unraveling the intricacies of mental health and psychology. "Mind Matters" stands as a central focus for meaningful conversations about the aspects of mental well-being that deeply shape our lives. From shedding light on common mental health issues to exploring ways to build resilience and highlighting the importance of mindfulness, we venture into the fascinating domains of cognitive and emotional psychology. Through engaging discussions and talks, our goal is to showcase the transformative power of a sound mind and advocate for a society that prioritizes mental health as a vital element of overall well-being. Join us as we uncover the captivating landscape of the mind and its profound impact on our lives.
        </p>

        <p>
          TEDxNITKSurathkal presents to you "Mind Matters." Join us on the 6th of October. Delve into the depths of the human mind with our diverse speakers as they share insights on mental health and psychology. Explore the intricate tapestry of your mind—a rich fabric woven with emotions and experiences. Join us as we unravel the complexities, understanding the significance of a sound mind in life's journey.
        </p>
        <a href="/" class="home-btn">Home</a>
        <a href="/theme" class="home-btn">Play Again</a>
      </div>
      <img
        src="assets/img/tedx-white.png"
        height="80px;"
        style="margin: 20px 0px"
      />
    </div>

    <div
      class="container position-absolute top-50 start-50 translate-middle text-center"
      id="reveal-game"
    >
      <h2 class="text-center pb-3">
        Points: <span id="points" class="font-monospace">0</span>
      </h2>
      <div id="game-region"></div>
      <div id="options" class="mt-3">
        <div class="button rounded" id="button-1"></div>
        <div class="button rounded" id="button-2"></div>
        <div class="button rounded" id="button-3"></div>
        <div class="button rounded" id="button-4"></div>
      </div>
    </div>

    <!-- ========== SCRIPTS ========== -->
    <!-- Bootstrap and jQuery CDN -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous"
    ></script>
    <!-- 2023 Theme -->
    <script src="./assets/theme/main.js" type="module"></script>
    <script src="https://unpkg.com/konva@8/konva.min.js"></script>
    <!-- GTAG Script -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-110715968-3"
    ></script>
    <script type="module">
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'UA-110715968-3');

      import * as themeScript from './assets/theme/main.js';

      const startModal = new bootstrap.Modal(
        document.querySelector('#start-modal')
      );
      let endModal = new bootstrap.Modal(document.querySelector('#end-modal'));

      let interval;
      let imgInterval;
      let round = 0;
      let pixelSize = 51;
      let points = 0;

      let stage;

      $(window).on('load', function () {
        $('.loader').delay(100).fadeOut('slow');
        startModal.show();
      });

      document
        .querySelector('#start-modal')
        .addEventListener('hide.bs.modal', e => {
          startTimer();
          startGame();
        });

      document
        .querySelector('#end-modal')
        .addEventListener('hide.bs.modal', e => {
          document.querySelector('#reveal-game').style.display = 'none';
          document.querySelector('#theme-reveal').style.display = 'block';
        });

      function startTimer() {
        interval = setInterval(() => {
          let pointsSpan = document.getElementById('points');
          pointsSpan.innerHTML = points;
        }, 100);
      }

      function generateNumber() {
        return 1 + Math.floor(Math.random() * 4);
      }

      function startGame() {
        let num = generateNumber();
        loadImage(round, num);
        loadOptions(round, num);
      }

      function nextRound() {
        points += pixelSize;
        clearInterval(imgInterval);
        round += 1;
        if (round === 6) {
          document.querySelector('#points-end').innerHTML = points;
          endModal.show();
        } else {
          stage.destroy();
          startGame();
        }
      }

      function wrongAnswer() {
        points -= 10;
      }

      function loadImage(round, num) {
        pixelSize = 51;
        stage = new Konva.Stage({
          container: 'game-region',
          width: 300,
          height: 300,
        });
        let layer = new Konva.Layer();
        stage.add(layer);
                Konva.Image.fromURL(
          `./assets/theme/images/${themeScript.CODE[round]}/${num}.png`,
          function (pic) {
            layer.destroyChildren();
        
            pic.position({
              x: 0,
              y: 0,
            });
            pic.cache();
        
            // Removed the pixelation effect
            // pic.filters([Konva.Filters.Pixelate]);
        
            // Removed pixelSize modification and interval
            // pic.pixelSize(pixelSize);
        
            layer.add(pic);
        
            // Removed the interval
            // imgInterval = setInterval(() => {
            //   pic.pixelSize(pixelSize);
            //   layer.batchDraw();
            //   pixelSize -= 1;
            //   if (pixelSize === 0) {
            //     pixelSize = 1;
            //   }
            // }, 100);
          }
        );


      function loadOptions(round, num) {
        let options = document.querySelectorAll('.button');
        let correct = document.querySelector(`#button-${num}`);

        for (let i = 0; i < options.length; i++) {
          options[i].removeEventListener('click', nextRound);
          options[i].removeEventListener('click', wrongAnswer);
          options[i].innerHTML =
            '<p>' +
            themeScript.IMAGEMAP[themeScript.CODE[round]][i + 1] +
            '</p>';
          if (options[i] !== correct) {
            options[i].addEventListener('click', wrongAnswer);
          }
        }

        correct.addEventListener('click', nextRound);
      }
    </script>
  </body>
</html>
